<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>AIè¨ºæ–­ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚·ãƒ¼ãƒˆ</title>
  <style>
    /* ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', 'Hiragino Sans', 'Yu Gothic', sans-serif;
      font-size: 10pt;
      line-height: 1.7;
      color: #1a1a2e;
      background: #fff;
    }

    .container {
      max-width: 210mm;
      margin: 0 auto;
      padding: 12mm 15mm;
    }

    /* ========================================
       ãƒ˜ãƒƒãƒ€ãƒ¼
    ======================================== */
    .header {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #0D3B66;
      position: relative;
    }

    .header::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 2px;
      background: linear-gradient(90deg, #667eea, #764ba2);
    }

    .header h1 {
      font-size: 22pt;
      color: #0D3B66;
      margin-bottom: 5px;
      letter-spacing: 2px;
    }

    .header .subtitle {
      font-size: 10pt;
      color: #666;
      margin-bottom: 8px;
    }

    .header .date {
      font-size: 9pt;
      color: #888;
    }

    /* ========================================
       ã‚¯ãƒªãƒ‹ãƒƒã‚¯æƒ…å ±
    ======================================== */
    .clinic-info {
      background: linear-gradient(135deg, #0D3B66 0%, #1a5490 100%);
      color: #fff;
      padding: 18px 22px;
      border-radius: 10px;
      margin-bottom: 22px;
      box-shadow: 0 4px 15px rgba(13, 59, 102, 0.2);
    }

    .clinic-info h2 {
      font-size: 15pt;
      margin-bottom: 12px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.25);
    }

    .clinic-info .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .clinic-info .info-item {
      font-size: 9.5pt;
      display: flex;
      gap: 8px;
    }

    .clinic-info .info-label {
      opacity: 0.75;
      min-width: 70px;
    }

    .clinic-info .info-value {
      font-weight: 500;
    }

    /* ========================================
       ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…±é€š
    ======================================== */
    .section {
      margin-bottom: 22px;
    }

    .section-title {
      font-size: 13pt;
      color: #0D3B66;
      padding: 10px 15px;
      background: linear-gradient(90deg, #f0f7ff 0%, #fff 100%);
      border-left: 4px solid #0D3B66;
      border-radius: 0 8px 8px 0;
      margin-bottom: 15px;
      font-weight: 600;
    }

    /* ========================================
       å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚µãƒãƒªãƒ¼
    ======================================== */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }

    .summary-card {
      background: #fff;
      border-radius: 10px;
      padding: 14px 10px;
      text-align: center;
      border: 1px solid #e8e8e8;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .summary-card .label {
      font-size: 8.5pt;
      color: #666;
      margin-bottom: 6px;
    }

    .summary-card .value {
      font-size: 16pt;
      font-weight: 700;
      color: #0D3B66;
    }

    .summary-card .unit {
      font-size: 9pt;
      color: #888;
      font-weight: 400;
    }

    .summary-card.highlight {
      background: linear-gradient(135deg, #f8f9ff 0%, #fff 100%);
      border-color: #667eea;
    }

    .summary-card.highlight .value {
      color: #667eea;
    }

    /* ãã®ä»–ã®ãŠæ‚©ã¿ */
    .other-concerns {
      background: #fafbfc;
      border: 1px solid #e8e8e8;
      border-radius: 8px;
      padding: 12px 15px;
      margin-top: 10px;
    }

    .other-concerns .label {
      font-size: 9pt;
      color: #666;
      margin-bottom: 5px;
    }

    .other-concerns .content {
      font-size: 10pt;
      color: #333;
    }

    /* ========================================
       é¡ä¼¼åŒ»é™¢ã¨ã®æ¯”è¼ƒ
    ======================================== */
    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .comparison-card {
      background: #fff;
      border-radius: 10px;
      padding: 16px;
      text-align: center;
      border: 1px solid #e8e8e8;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .comparison-card .label {
      font-size: 10pt;
      color: #555;
      margin-bottom: 10px;
      font-weight: 500;
    }

    .comparison-card .percentile {
      font-size: 22pt;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .comparison-card .percentile-label {
      font-size: 9pt;
      color: #888;
      margin-bottom: 10px;
    }

    .comparison-card .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 9pt;
      font-weight: 500;
    }

    .comparison-card.excellent .percentile { color: #10b981; }
    .comparison-card.excellent .badge { background: #d1fae5; color: #065f46; }

    .comparison-card.good .percentile { color: #3b82f6; }
    .comparison-card.good .badge { background: #dbeafe; color: #1e40af; }

    .comparison-card.average .percentile { color: #f59e0b; }
    .comparison-card.average .badge { background: #fef3c7; color: #92400e; }

    .comparison-card.needs-improvement .percentile { color: #ef4444; }
    .comparison-card.needs-improvement .badge { background: #fee2e2; color: #991b1b; }

    /* ========================================
       æœ€å„ªå…ˆèª²é¡Œ
    ======================================== */
    .priority-box {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      padding: 18px 22px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .priority-box .icon {
      width: 50px;
      height: 50px;
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .priority-box .content {
      text-align: left;
    }

    .priority-box .label {
      font-size: 9pt;
      opacity: 0.85;
      margin-bottom: 4px;
    }

    .priority-box .value {
      font-size: 16pt;
      font-weight: 700;
    }

    /* ========================================
       AIã‹ã‚‰ã®ææ¡ˆ
    ======================================== */
    .recommendation-list {
      list-style: none;
    }

    .recommendation-item {
      background: #fff;
      border: 1px solid #e8e8e8;
      border-radius: 10px;
      padding: 16px 18px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .recommendation-item .header {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 10px;
      border: none;
      padding: 0;
    }

    .recommendation-item .number {
      width: 26px;
      height: 26px;
      background: linear-gradient(135deg, #0D3B66 0%, #1a5490 100%);
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11pt;
      font-weight: 600;
      flex-shrink: 0;
    }

    .recommendation-item h4 {
      font-size: 11pt;
      color: #0D3B66;
      font-weight: 600;
      line-height: 1.5;
    }

    .recommendation-item .description {
      font-size: 9.5pt;
      color: #555;
      margin-bottom: 12px;
      padding-left: 38px;
    }

    .recommendation-steps {
      background: #f8f9fa;
      padding: 12px 15px;
      border-radius: 8px;
      margin-left: 38px;
    }

    .recommendation-steps h5 {
      font-size: 9.5pt;
      color: #333;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .recommendation-steps ol {
      margin-left: 18px;
      font-size: 9pt;
      color: #555;
    }

    .recommendation-steps li {
      margin-bottom: 4px;
    }

    .recommendation-effect {
      display: inline-block;
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      color: #065f46;
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 9pt;
      margin-top: 10px;
      margin-left: 38px;
      font-weight: 500;
    }

    /* ========================================
       ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³
    ======================================== */
    .action-plan {
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
      border: 2px solid #fbbf24;
      border-radius: 10px;
      padding: 20px;
    }

    .action-plan h3 {
      font-size: 12pt;
      color: #b45309;
      margin-bottom: 15px;
      text-align: center;
      font-weight: 600;
    }

    .action-timeline {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }

    .timeline-item {
      text-align: center;
      padding: 12px 8px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .timeline-item .period {
      font-size: 10pt;
      font-weight: 600;
      color: #b45309;
      margin-bottom: 6px;
    }

    .timeline-item .task {
      font-size: 8.5pt;
      color: #555;
      line-height: 1.5;
    }

    /* ========================================
       CTA
    ======================================== */
    .cta-section {
      background: linear-gradient(135deg, #0D3B66 0%, #1a5490 100%);
      color: #fff;
      padding: 22px;
      border-radius: 10px;
      text-align: center;
      margin-top: 22px;
      box-shadow: 0 4px 15px rgba(13, 59, 102, 0.2);
    }

    .cta-section h3 {
      font-size: 13pt;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .cta-section p {
      font-size: 10pt;
      opacity: 0.9;
      margin-bottom: 15px;
      line-height: 1.7;
    }

    .cta-box {
      display: inline-block;
      background: rgba(255,255,255,0.15);
      padding: 12px 25px;
      border-radius: 8px;
    }

    .cta-box .label {
      font-size: 9pt;
      opacity: 0.8;
    }

    .cta-box .value {
      font-size: 11pt;
      font-weight: 600;
      margin-top: 4px;
    }

    /* ========================================
       ãƒ•ãƒƒã‚¿ãƒ¼
    ======================================== */
    .footer {
      margin-top: 25px;
      padding-top: 15px;
      border-top: 1px solid #e8e8e8;
      text-align: center;
      font-size: 8.5pt;
      color: #888;
    }

    .footer .company {
      font-weight: 600;
      color: #0D3B66;
      font-size: 10pt;
      margin-bottom: 5px;
    }

    /* ========================================
       å°åˆ·ç”¨èª¿æ•´
    ======================================== */
    @media print {
      body {
        print-color-adjust: exact;
        -webkit-print-color-adjust: exact;
      }

      .container {
        padding: 8mm 12mm;
      }

      .section,
      .recommendation-item {
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
      <h1>AIè¨ºæ–­ ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚·ãƒ¼ãƒˆ</h1>
      <p class="subtitle">æ­¯ç§‘åŒ»é™¢åœ°åŸŸä¸€ç•ªå®Ÿè·µä¼š - 3,247ä»¶ã®æˆåŠŸäº‹ä¾‹ã«åŸºã¥ãè¨ºæ–­</p>
      <p class="date">è¨ºæ–­æ—¥: <?= diagnosisDate ?></p>
    </header>

    <!-- ã‚¯ãƒªãƒ‹ãƒƒã‚¯æƒ…å ± -->
    <div class="clinic-info">
      <h2><?= data.clinicName || 'åŒ»é™¢åæœªå…¥åŠ›' ?> æ§˜</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">ã”æ‹…å½“è€…:</span>
          <span class="info-value"><?= data.userName || '-' ?> æ§˜</span>
        </div>
        <div class="info-item">
          <span class="info-label">åœ°åŸŸ:</span>
          <span class="info-value"><?= getRegionName(data.region) ?></span>
        </div>
        <div class="info-item">
          <span class="info-label">é–‹æ¥­å¹´æ•°:</span>
          <span class="info-value"><?= getYearsOpenName(data.yearsOpen) ?></span>
        </div>
        <div class="info-item">
          <span class="info-label">ãƒ¦ãƒ‹ãƒƒãƒˆæ•°:</span>
          <span class="info-value"><?= data.units || '-' ?> å°</span>
        </div>
      </div>
    </div>

    <!-- å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚µãƒãƒªãƒ¼ -->
    <section class="section">
      <h3 class="section-title">å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚µãƒãƒªãƒ¼</h3>
      <div class="summary-grid">
        <div class="summary-card">
          <div class="label">æ–°æ‚£æ•°</div>
          <div class="value"><?= data.newPatient || '--' ?><span class="unit">äºº/æœˆ</span></div>
        </div>
        <div class="summary-card highlight">
          <div class="label">æœˆé–“åŒ»æ¥­åå…¥</div>
          <div class="value"><?= data.totalRevenue || '--' ?><span class="unit">ä¸‡å††</span></div>
        </div>
        <div class="summary-card highlight">
          <div class="label">è‡ªè²»ç‡</div>
          <div class="value"><?= data.selfPayRate ? Math.floor(data.selfPayRate) : '--' ?><span class="unit">%</span></div>
        </div>
        <div class="summary-card">
          <div class="label">ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç‡</div>
          <div class="value"><?= data.cancel ? Math.floor(data.cancel) : '--' ?><span class="unit">%</span></div>
        </div>
        <div class="summary-card">
          <div class="label">ãƒªã‚³ãƒ¼ãƒ«ç‡</div>
          <div class="value"><?= data.recall ? Math.floor(data.recall) : '--' ?><span class="unit">%</span></div>
        </div>
      </div>

      <? if (data.otherConcerns) { ?>
      <div class="other-concerns">
        <div class="label">ãã®ä»–ã®ãŠæ‚©ã¿</div>
        <div class="content"><?= data.otherConcerns ?></div>
      </div>
      <? } ?>
    </section>

    <!-- é¡ä¼¼åŒ»é™¢ã¨ã®æ¯”è¼ƒ -->
    <section class="section">
      <h3 class="section-title">é¡ä¼¼åŒ»é™¢ã¨ã®æ¯”è¼ƒ</h3>
      <div class="comparison-grid">
        <? var npStatus = comparison.newPatientPower ? comparison.newPatientPower.status : 'average'; ?>
        <div class="comparison-card <?= npStatus ?>">
          <div class="label">æ–°æ‚£ç²å¾—åŠ›</div>
          <div class="percentile">ä¸Šä½ <?= comparison.newPatientPower ? formatPercentile(comparison.newPatientPower.percentile) : '--' ?>%</div>
          <div class="percentile-label">æ¥­ç•Œå†…é †ä½</div>
          <span class="badge"><?= getStatusLabel(npStatus) ?></span>
        </div>

        <? var spStatus = comparison.selfPayPower ? comparison.selfPayPower.status : 'average'; ?>
        <div class="comparison-card <?= spStatus ?>">
          <div class="label">è‡ªè²»è»¢æ›åŠ›</div>
          <div class="percentile">ä¸Šä½ <?= comparison.selfPayPower ? formatPercentile(comparison.selfPayPower.percentile) : '--' ?>%</div>
          <div class="percentile-label">æ¥­ç•Œå†…é †ä½</div>
          <span class="badge"><?= getStatusLabel(spStatus) ?></span>
        </div>

        <? var prStatus = comparison.patientRetention ? comparison.patientRetention.status : 'average'; ?>
        <div class="comparison-card <?= prStatus ?>">
          <div class="label">æ‚£è€…å®šç€ç‡</div>
          <div class="percentile">ä¸Šä½ <?= comparison.patientRetention ? formatPercentile(comparison.patientRetention.percentile) : '--' ?>%</div>
          <div class="percentile-label">æ¥­ç•Œå†…é †ä½</div>
          <span class="badge"><?= getStatusLabel(prStatus) ?></span>
        </div>
      </div>
    </section>

    <!-- æœ€å„ªå…ˆèª²é¡Œ -->
    <section class="section">
      <div class="priority-box">
        <div class="icon">ğŸ¯</div>
        <div class="content">
          <div class="label">ã‚ãªãŸã®æœ€å„ªå…ˆèª²é¡Œ</div>
          <div class="value"><?= getPriorityName(data.priority) ?></div>
        </div>
      </div>
    </section>

    <!-- AIã‹ã‚‰ã®ææ¡ˆ -->
    <section class="section">
      <h3 class="section-title">AIã‹ã‚‰ã®ææ¡ˆ</h3>
      <ul class="recommendation-list">
        <? var recs = recommendations; ?>
        <? if (recs && recs.items) { ?>
          <? for (var i = 0; i < Math.min(recs.items.length, 3); i++) { ?>
            <? var item = recs.items[i]; ?>
            <? if (typeof item === 'string') { ?>
            <li class="recommendation-item">
              <div class="header">
                <span class="number"><?= i + 1 ?></span>
                <h4><?= item ?></h4>
              </div>
            </li>
            <? } else { ?>
            <li class="recommendation-item">
              <div class="header">
                <span class="number"><?= i + 1 ?></span>
                <h4><?= item.title || item ?></h4>
              </div>
              <? if (item.description) { ?>
              <p class="description"><?= item.description ?></p>
              <? } ?>
              <? if (item.steps && item.steps.length > 0) { ?>
              <div class="recommendation-steps">
                <h5>å®Ÿè¡Œã‚¹ãƒ†ãƒƒãƒ—</h5>
                <ol>
                  <? for (var j = 0; j < Math.min(item.steps.length, 5); j++) { ?>
                  <li><?= item.steps[j] ?></li>
                  <? } ?>
                </ol>
              </div>
              <? } ?>
              <? if (item.effect) { ?>
              <span class="recommendation-effect">æœŸå¾…åŠ¹æœ: <?= item.effect ?></span>
              <? } ?>
            </li>
            <? } ?>
          <? } ?>
        <? } else { ?>
        <li class="recommendation-item">
          <div class="header">
            <span class="number">1</span>
            <h4>è¨ºæ–­çµæœã«åŸºã¥ãæ”¹å–„ææ¡ˆ</h4>
          </div>
          <p class="description">è©³ç´°ãªåˆ†æçµæœã«ã¤ã„ã¦ã¯ã€ç„¡æ–™ç›¸è«‡ã«ã¦ã”èª¬æ˜ã„ãŸã—ã¾ã™ã€‚</p>
        </li>
        <? } ?>
      </ul>
    </section>

    <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ -->
    <section class="section">
      <div class="action-plan">
        <h3>ğŸ“‹ æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³</h3>
        <div class="action-timeline">
          <div class="timeline-item">
            <div class="period">ä»Šã™ã</div>
            <div class="task">ç„¡æ–™ç›¸è«‡ã®ã”äºˆç´„<br>è¨ºæ–­çµæœã®è©³ç´°è§£èª¬</div>
          </div>
          <div class="timeline-item">
            <div class="period">1é€±é–“ä»¥å†…</div>
            <div class="task">èª²é¡Œã‚’é™¢å†…ã§å…±æœ‰<br>å„ªå…ˆé †ä½ã®ç¢ºèª</div>
          </div>
          <div class="timeline-item">
            <div class="period">1ãƒ¶æœˆä»¥å†…</div>
            <div class="task">æœ€å„ªå…ˆèª²é¡Œã¸ã®<br>å–ã‚Šçµ„ã¿é–‹å§‹</div>
          </div>
          <div class="timeline-item">
            <div class="period">3ãƒ¶æœˆå¾Œ</div>
            <div class="task">åŠ¹æœæ¸¬å®š<br>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸</div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <div class="cta-section">
      <h3>ğŸ¤ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼šç„¡æ–™ç›¸è«‡ã®ã”æ¡ˆå†…</h3>
      <p>è¨ºæ–­çµæœã«ã¤ã„ã¦ã€ã‚ˆã‚Šè©³ã—ãã”èª¬æ˜ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚<br>å…·ä½“çš„ãªæ”¹å–„ãƒ—ãƒ©ãƒ³ã‚’ã”ä¸€ç·’ã«ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
      <div class="cta-box">
        <div class="label">ç„¡æ–™ç›¸è«‡ã®ã”äºˆç´„</div>
        <div class="value">ä¸‹è¨˜ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ã§ã”é€£çµ¡ãã ã•ã„</div>
      </div>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="footer">
      <p class="company">æ­¯ç§‘åŒ»é™¢åœ°åŸŸä¸€ç•ªå®Ÿè·µä¼š</p>
      <p>ã“ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚·ãƒ¼ãƒˆã¯ã€AIè¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚</p>
      <p>å†…å®¹ã«ã¤ã„ã¦ã®ã”è³ªå•ã¯ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚</p>
    </footer>
  </div>

  <script>
    // PDFç”Ÿæˆç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã‚‚ä½¿ç”¨ï¼‰
    function getRegionName(code) {
      const regions = {
        'hokkaido': 'åŒ—æµ·é“',
        'tohoku': 'æ±åŒ—',
        'kanto': 'é–¢æ±',
        'chubu': 'ä¸­éƒ¨',
        'tokai': 'æ±æµ·',
        'kinki': 'è¿‘ç•¿',
        'chugoku': 'ä¸­å›½',
        'shikoku': 'å››å›½',
        'kyushu': 'ä¹å·ãƒ»æ²–ç¸„'
      };
      return regions[code] || code || 'æœªé¸æŠ';
    }

    function getYearsOpenName(code) {
      const years = {
        'under3': '3å¹´æœªæº€',
        '3to5': '3ã€œ5å¹´',
        '5to10': '5ã€œ10å¹´',
        '10to20': '10ã€œ20å¹´',
        'over20': '20å¹´ä»¥ä¸Š'
      };
      return years[code] || code || 'æœªé¸æŠ';
    }

    function getPriorityName(code) {
      const priorities = {
        'newPatient': 'æ–°æ‚£ç²å¾—',
        'selfPay': 'è‡ªè²»ç‡å‘ä¸Š',
        'cancel': 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯¾ç­–',
        'staffRetention': 'ã‚¹ã‚¿ãƒƒãƒ•å®šç€',
        'staffRecruitment': 'ã‚¹ã‚¿ãƒƒãƒ•æ¡ç”¨',
        'efficiency': 'æ¥­å‹™åŠ¹ç‡åŒ–'
      };
      return priorities[code] || code || 'æœªé¸æŠ';
    }

    function getStatusLabel(status) {
      const labels = {
        'excellent': 'éå¸¸ã«å„ªç§€',
        'good': 'å„ªç§€',
        'average': 'å¹³å‡çš„',
        'needs-improvement': 'æ”¹å–„ã®ä½™åœ°ã‚ã‚Š'
      };
      return labels[status] || 'å¹³å‡çš„';
    }

    function formatPercentile(percentile) {
      let topPercent = 100 - percentile;
      if (topPercent <= 0) topPercent = 0.1;
      if (topPercent < 10) return topPercent.toFixed(1);
      return Math.floor(topPercent);
    }
  </script>
</body>
</html>
